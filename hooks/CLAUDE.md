# hooks - çŠ¶æ€ç®¡ç† (L2)

> çˆ¶çº§: [/CLAUDE.md](../CLAUDE.md)
> æœ€åæ›´æ–°: 2026-01-31

---

## ğŸ“ æ¨¡å—å®šä½

React Hooks é›†åˆï¼Œç®¡ç†åº”ç”¨çŠ¶æ€ã€‚æ ¸å¿ƒæ˜¯ `use-game.ts` æ¸¸æˆçŠ¶æ€æœºã€‚

---

## ğŸ“ æˆå‘˜æ¸…å•

| æ–‡ä»¶ | èŒè´£ | æ¶ˆè´¹è€… |
| ------ | ------ | -------- |
| `use-game.ts` | æ¸¸æˆçŠ¶æ€æœº | GameContainer |
| `use-mobile.ts` | ç§»åŠ¨ç«¯æ£€æµ‹ | é€šç”¨ |
| `use-toast.ts` | Toast é€šçŸ¥ | é€šç”¨ |

---

## ğŸ”Œ æš´éœ²æ¥å£

### use-game.ts

```typescript
export function useGame(): {
  // çŠ¶æ€
  game: GameRun | null          // å½“å‰æ¸¸æˆçŠ¶æ€
  history: GameRunSummary[]     // æœ¬åœ°å†å²è®°å½•
  
  // ç”Ÿå‘½å‘¨æœŸ
  startGame: (mode: GameMode, difficulty: Difficulty) => void
  resetGame: () => void
  clearHistory: () => void
  
  // æ¸¸æˆæ“ä½œ
  submitAnswer: (input: string) => void
  nextQuestion: () => void
  retryQuestion: () => void
  startInput: () => void
  skipQuestion: () => void
  
  // ç»Ÿè®¡
  getStats: () => GameStats | null
}
```

---

## ğŸ”„ çŠ¶æ€æœº

```text
           startGame()
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         GameRun                 â”‚
â”‚                                 â”‚
â”‚  runState: 'playing'            â”‚
â”‚       â”‚                         â”‚
â”‚       â–¼                         â”‚
â”‚  questionState å­çŠ¶æ€æœº:        â”‚
â”‚                                 â”‚
â”‚  'show' â”€â”€â–º 'input' â”€â”€â–º judge   â”‚
â”‚                  â”‚              â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚        â–¼        â–¼        â–¼      â”‚
â”‚   'correct'  'wrong_   'wrong_  â”‚
â”‚      â”‚       soft'     final'   â”‚
â”‚      â”‚         â”‚         â”‚      â”‚
â”‚      â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”    â”‚      â”‚
â”‚      â”‚    â–¼         â–¼    â–¼      â”‚
â”‚      â”‚  retry    shield  â”‚      â”‚
â”‚      â”‚    â”‚         â”‚    â”‚      â”‚
â”‚      â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜      â”‚
â”‚                â–¼                â”‚
â”‚          nextQuestion           â”‚
â”‚                â”‚                â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â–¼                       â–¼    â”‚
â”‚  ç»§ç»­                   finishedâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
          resetGame()
               â”‚
               â–¼
           game = null
```

---

## ğŸµ å‰¯ä½œç”¨

`use-game.ts` å†…éƒ¨è§¦å‘çš„å‰¯ä½œç”¨ï¼š

| äº‹ä»¶ | å‰¯ä½œç”¨ |
| ------ | -------- |
| ç­”å¯¹ | playCorrectSound() |
| è¿å‡» â‰¥ 2 | playComboSound(combo) |
| é€Ÿåº¦æ˜Ÿ | playSpeedStarSound() |
| æŠ¤ç›¾æ¿€æ´» | playShieldSound() |
| ç­”é”™ | playWrongSound() |
| æ¸¸æˆç»“æŸ | playFinishSound() |
| é™æ—¶æ¨¡å¼ | setInterval å€’è®¡æ—¶ |

---

## âš ï¸ æŠ€æœ¯å€º

| é—®é¢˜ | å½±å“ | è§£å†³æ–¹æ¡ˆ |
| ------ | ------ | ---------- |
| å• useState ç®¡ç†å¤æ‚çŠ¶æ€ | çŠ¶æ€æ›´æ–°å¯èƒ½ä¸ä¸€è‡´ | æ”¹ç”¨ useReducer æˆ– XState |
| ä»…æœ¬åœ°å†å² | è·¨è®¾å¤‡ä¸¢å¤± | æ¥å…¥ DB + Auth |
| éŸ³æ•ˆå‰¯ä½œç”¨å†…è” | ä¸å¯é…ç½®/å…³é—­ | æŠ½ç¦»ä¸ºå¯é…ç½®æœåŠ¡ |

---

## ğŸ”— ä¾èµ–å…³ç³»

```text
hooks/use-game.ts
    â”œâ”€â”€ ä¾èµ– lib/game-types.ts (ç±»å‹ + é…ç½® + è®¡ç®—å‡½æ•°)
    â”œâ”€â”€ ä¾èµ– lib/question-generator.ts (é¢˜ç›®ç”Ÿæˆ)
    â””â”€â”€ ä¾èµ– lib/sounds.ts (éŸ³æ•ˆæ’­æ”¾)
```

---

## ğŸ“‹ å˜æ›´æ—¥å¿—

| æ—¥æœŸ | å˜æ›´ | æ–‡ä»¶ |
| ------ | ------ | ------ |
| 2026-01-31 | åˆå§‹å®ç° | use-game.ts |
| 2026-01-31 | å¢åŠ æœ¬åœ°å†å²æŒä¹…åŒ– | use-game.ts |
| 2026-01-31 | åˆ›å»ºæ¨¡å—æ–‡æ¡£ | CLAUDE.md |

---

[PROTOCOL]: å˜æ›´æ—¶æ›´æ–°æ­¤æ–‡æ¡£ï¼Œç„¶åæ£€æŸ¥ /CLAUDE.md
